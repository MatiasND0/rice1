import{g as p,h as s,k as y}from"./V3SVKRNG.js";import{a as b}from"./ZVZDUOP5.js";import{i as f}from"./3PS7M655.js";var T=class{constructor(){}getRootElement(){return document.querySelector("body main")}getTextInputElement(){let e=document.querySelector("#prompt-textarea");return e?Object.assign(e,{getValue:function(){let t=e==null?void 0:e.value;return t||(t=String(e.innerText||"").trim()),t||""}}):null}updateTextInputValue(e){let t=this.getTextInputElement();t&&(t.tagName==="TEXTAREA"&&(t.value=e),t.tagName==="DIV"&&(t.innerText=e))}isNewChatPage(){return location.pathname==="/"&&!document.querySelector("div.h-full[class^=react-scroll-to-bottom]")}getNewChatButton(){let e=document.querySelectorAll('a[href="/"]');return e&&e.length>0?e[0]:null}renderToolbar(e,t){var l;let n=this.getTextInputElement();if(!n)return;let r=n==null?void 0:n.closest("form");r&&(e.classList.add("lg:mx-auto","lg:max-w-2xl","xl:max-w-3xl"),e.style.order="3",e.style.position="relative",e.style.flex="1",e.style.width="100%",t&&(t.style.padding="16px 4px 8px"),(l=r.parentElement)==null||l.insertBefore(e,r.nextElementSibling),r.parentElement&&(r.parentElement.style.display="block"))}renderSlashCommandsMenu(e){let t=document.querySelector("main form");t&&(e.style.zIndex="9999",e.style.position="relative",t==null||t.insertBefore(e,t==null?void 0:t.firstChild))}renderPromptApp(e,t){var g;let n=document.querySelector("body main h1"),r=n==null?void 0:n.parentElement;r&&(r.style.display="none");let l=document.querySelector("body main form"),i=l==null?void 0:l.parentElement,a=(g=l==null?void 0:l.parentElement)==null?void 0:g.parentElement;if(a&&i){a.style.maxWidth="100%",i.classList.add("md:max-w-3xl"),i.classList.add("lg:max-w-[40rem]"),i.classList.add("xl:max-w-[48rem]"),i.classList.add("mx-auto"),e.style.height=`calc(100% - ${350}px )`,t&&(t.style.height="100%"),a.prepend(e);let h=m=>{var c;let o=document.activeElement;o!=null&&o.shadowRoot&&(o=(c=o.shadowRoot)==null?void 0:c.activeElement),((o==null?void 0:o.tagName)==="INPUT"||(o==null?void 0:o.tagName)==="TEXTAREA"||String(o==null?void 0:o.getAttribute("contenteditable")).toLowerCase()==="true")&&m.stopImmediatePropagation()};window.addEventListener("keypress",h),window.addEventListener("keydown",h),document.addEventListener("keypress",h),document.addEventListener("keydown",h)}}renderPromptRunner(e){var n;let t=document.querySelector("main.relative");(n=t==null?void 0:t.parentElement)==null||n.appendChild(e)}getSubmitBtn(){let e=document.querySelector("button[data-testid=send-button]");return e||(e=document.querySelector("main form div.flex.items-end > button:last-child")),e}handlePromptAppDisabled(){let e=p(),t=s();if(this.isNewChatPage()){e&&e.remove(),t&&t.remove();let n=this.getNewChatButton();n==null||n.click();let r=document.querySelector("div.text-2xl"),l=r==null?void 0:r.parentElement;l&&(l.style.display="flex")}}handlePromptAppEnabled(){}updateTextInputPlaceholder(e){let t=this.getTextInputElement();t&&t.setAttribute("placeholder",e)}getCurrentChatUserEmail(){var e,t,n;try{let r=document.querySelector("#__NEXT_DATA__");if(r){let l=JSON.parse(r.innerText);return((n=(t=(e=l==null?void 0:l.props)==null?void 0:e.pageProps)==null?void 0:t.user)==null?void 0:n.email)||""}return""}catch(r){return""}}};var C=T;var x=class{constructor(){}getRootElement(){return y()}getTextInputElement(){let e=document.querySelector("div[role=dialog]"),t=null;return e&&(t=e.querySelector("div[contenteditable=true]")),t||(t=document.querySelector("div[contenteditable=true]")),t?Object.assign(t,{getValue:function(){return t==null?void 0:t.innerText.trim()}}):null}updateTextInputValue(e){let t=this.getTextInputElement();t&&(t.innerText=e)}renderToolbar(e,t){var l;let n=this.getTextInputElement();if(!n)return;let r=n.closest("fieldset");if(r){r.style.marginTop="-27px";let i=r.querySelector("input[data-testid='file-upload']");e.style.position="relative",document.documentElement.getAttribute("data-mode")==="dark"?e.style.backgroundColor="#393937":e.style.backgroundColor="rgba(255, 255, 255, 1)",e.style.borderRadius="8px",e.style.boxShadow="0px 0px 0.5px 0px rgba(0, 0, 0, 0.40), 0px 1px 3px 0px rgba(0, 0, 0, 0.09), 0px 4px 8px 0px rgba(0, 0, 0, 0.09)",e.style.marginTop="8px",e.style.zIndex="10",t&&(t.style.padding="8px",t.style.paddingLeft="8px"),document.querySelector("div[role=dialog]")||location.pathname==="/chats"?(e.style.minWidth="635px",e.style.marginLeft="-12px",e.style.marginBottom="5px"):e.style.marginBottom="15px",(l=r.parentElement)==null||l.insertBefore(e,r.nextElementSibling)}}renderSlashCommandsMenu(e){let t=this.getTextInputElement(),n=t==null?void 0:t.closest("fieldset"),r=n==null?void 0:n.parentElement;r&&n&&(r.style.position="relative",e.style.position="absolute",e.style.top="-175px",e.style.left="0",e.style.right="0",e.style.zIndex="999",r==null||r.insertBefore(e,n))}getNewChatButton(){return document.querySelector('a[href="/new"]')}isNewChatPage(){return location.pathname==="/chats"||location.pathname==="/new"?!0:location.pathname.startsWith("/chat")?document.querySelectorAll("div.group div.font-user-message").length===0:!1}renderPromptApp(e,t){var i;let r=this.getRootElement().querySelector("main h1.text-center"),l=r==null?void 0:r.parentElement;if(l||(l=(i=document.querySelector("body main"))==null?void 0:i.firstChild),l){let a=l.parentElement;a&&(a.style.width="100%");for(let m of l.children)m instanceof HTMLElement&&(m.style.display="none");let g=document.querySelector("main");if(g&&(g.style.paddingTop="0"),t){let m=170,o=this.getTextInputElement();if(o){let c=o.closest("fieldset");c&&(m=parseInt(getComputedStyle(c).height))}e.style.width="97vw",t.style.maxWidth="97vw",t.style.height=`${window.innerHeight-m-90}px`,t.style.paddingTop="3px",t.style.paddingBottom="0px",t.style.margin="0 auto"}document.querySelectorAll('div[role="dialog"][data-state="open"][id^="radix-"]').length===0&&location.pathname!=="/chats"&&location.pathname!=="/new"&&(e.style.width="100vw",t&&(t.style.position="fixed",t.style.top="36px",t.style.left="0",t.style.right="0",t.style.height=`${window.innerHeight-260}px`)),l.prepend(e),document.body.addEventListener("keydown",function(m){var c;let o=document.activeElement;o!=null&&o.shadowRoot&&(o=(c=o.shadowRoot)==null?void 0:c.activeElement),((o==null?void 0:o.tagName)==="INPUT"||(o==null?void 0:o.tagName)==="TEXTAREA"||String(o==null?void 0:o.getAttribute("contenteditable")).toLowerCase()==="true")&&m.stopImmediatePropagation()})}}renderPromptRunner(e){this.getRootElement().appendChild(e)}getSubmitBtn(){let e=document.querySelector('div[data-value="new chat"] > button');return e||document.querySelector('button[aria-label="Send Message"]')}handlePromptAppDisabled(){if(!this.isNewChatPage())return;let n=y().querySelector("main h1.text-center"),r=n==null?void 0:n.parentElement;if(r)for(let a of r.children)a instanceof HTMLElement&&a.style.removeProperty("display");let l=p(),i=s();l&&l.remove(),i&&i.remove()}handlePromptAppEnabled(){}getCurrentChatUserEmail(){var e;try{let n=Array.from(document.querySelectorAll("script[nonce]")).find(l=>l.innerHTML.includes("email_address")),r=(e=n==null?void 0:n.innerText.match(/"email_address\\":\\"(.+?)\\"/))==null?void 0:e[1];return r!=null?r:""}catch(t){return""}}},L=x;var H=class{constructor(){}getRootElement(){return document.querySelector("main.main-landmark")}getTextInputElement(){let e=document.querySelector("div.ql-editor.textarea");if(e)return Object.assign(e,{getValue:function(){return e==null?void 0:e.innerText.trim()}});let t=document.querySelector("input-area textarea");return t?Object.assign(t,{getValue:function(){return t.value}}):null}updateTextInputValue(e){let t=this.getTextInputElement();t&&((t==null?void 0:t.tagName)!=="TEXTAREA"?t.innerText=e:t.value=e)}renderToolbar(e,t){let n=document.querySelector("input-area");e.style.margin="0 48px",t&&(t.style.padding="16px 4px 8px"),n==null||n.appendChild(e)}renderSlashCommandsMenu(e){let t=document.querySelector("input-area");t&&(e.style.maxWidth="88%",e.style.marginLeft="auto",e.style.marginRight="auto",t==null||t.insertBefore(e,t.firstChild))}isNewChatPage(){let e=location.pathname,t=this.getNewChatButton();return e==="/chat"&&(t==null?void 0:t.getAttribute("disabled"))==="true"}getNewChatButton(){return document.querySelector("button[data-test-id=new-chat]")}renderPromptApp(e,t){let n=document.querySelector("*[data-test-id=chat-history-container]");if(n){let r=n.querySelectorAll(".conversation-container, .zero-state-container.ng-star-inserted");r.length>0&&r.forEach(l=>{l.style.display="none"}),e.style.width="100%",t&&(t.style.paddingTop="16px",t.style.paddingBottom="16px",t.style.marginLeft="-16px",t.style.marginRight="-16px"),n.appendChild(e)}}renderPromptRunner(e,t){let n=document.querySelector("chat-window");n&&(n.style.position="relative",n.style.overflow="hidden",n.appendChild(e))}getSubmitBtn(){return document.querySelector("button.send-button")}handlePromptAppDisabled(){let e=p(),t=s();e&&(e.style.display="none"),t&&(t.style.display="none");let n=document.querySelectorAll("div.conversation-container, .zero-state-container.ng-star-inserted");n.length>0&&n.forEach(r=>{r.style.display="flex"})}handlePromptAppEnabled(){if(this.isNewChatPage()){let t=p(),n=s();t&&(t.style.display="block"),n&&(n.style.display="block");let r=document.querySelectorAll("div.conversation-container, .zero-state-container.ng-star-inserted");r.length>0&&r.forEach(l=>{l.style.display="none"})}}updateTextInputPlaceholder(e){let t=this.getTextInputElement();t&&t.setAttribute("data-placeholder",e)}getCurrentChatUserEmail(){try{let e=document.querySelector(".gb_Cc > div:not([class])"),t=e==null?void 0:e.parentElement,n=t==null?void 0:t.lastChild;return n==null?void 0:n.innerText}catch(e){return""}}},I=H;var M=class{constructor(){}getRootElement(){return document.querySelector("#app-root")}getTextInputElement(){let e=document.querySelector("rich-textarea div.ql-editor.textarea");return e?Object.assign(e,{getValue:function(){return e==null?void 0:e.innerText.trim()}}):null}updateTextInputValue(e){let t=this.getTextInputElement();t&&((t==null?void 0:t.tagName)!=="TEXTAREA"?t.innerText=e:t.value=e)}renderToolbar(e,t){let n=document.querySelector("input-area-v2");e.style.margin="0 48px",t&&(t.style.padding="16px 4px 8px"),n==null||n.appendChild(e)}renderSlashCommandsMenu(e){let t=document.querySelector("input-area-v2");t&&(e.style.maxWidth="88%",e.style.marginLeft="auto",e.style.marginRight="auto",t==null||t.insertBefore(e,t.firstChild))}isNewChatPage(){let e=location.pathname,t=this.getNewChatButton();return e==="/app"&&(t==null?void 0:t.getAttribute("disabled"))==="true"}getNewChatButton(){return document.querySelector("*.side-nav-button-container button[data-test-id=button]")}renderPromptApp(e,t){let n=document.querySelector("#chat-history");if(n){let r=n.querySelectorAll("*[data-test-id=chat-history-container]");r.length>0&&r.forEach(l=>{l.style.display="none"}),e.style.padding="0 10px",e.style.overflowY="auto",e.style.width="100%",t&&(t.style.paddingTop="16px",t.style.paddingBottom="64px"),n.appendChild(e)}}renderPromptRunner(e,t){let n=document.querySelector("chat-window");n&&(n.style.position="relative",n.style.overflow="hidden",n.appendChild(e))}getSubmitBtn(){return document.querySelector("button.send-button")}handlePromptAppDisabled(){let e=p(),t=s();e&&(e.style.display="none"),t&&(t.style.display="none");let n=document.querySelectorAll("*[data-test-id=chat-history-container]");n.length>0&&n.forEach(r=>{r.style.display="flex"})}handlePromptAppEnabled(){if(this.isNewChatPage()){let t=p(),n=s();t&&(t.style.display="block"),n&&(n.style.display="block");let r=document.querySelectorAll("*[data-test-id=chat-history-container]");r.length>0&&r.forEach(l=>{l.style.display="none"})}}updateTextInputPlaceholder(e){let t=this.getTextInputElement();t&&t.setAttribute("data-placeholder",e)}getCurrentChatUserEmail(){try{let e=document.querySelector(".gb_Cc > div:not([class])"),t=e==null?void 0:e.parentElement,n=t==null?void 0:t.lastChild;return n==null?void 0:n.innerText}catch(e){return""}}},P=M;var E=class{constructor(){f(this,"currentChatWebSite");f(this,"currentHelper");this.currentChatWebSite=b(),this.currentHelper=this.getHelper()}getHelper(){return this.currentChatWebSite==="Claude"?new L:this.currentChatWebSite==="Bard"?new I:this.currentChatWebSite==="Gemini"?new P:new C}getRootElement(){return this.currentHelper.getRootElement()}getTextInputElement(){return this.currentHelper.getTextInputElement()}updateTextInputValue(e){return this.currentHelper.updateTextInputValue(e)}isNewChatPage(){return this.currentHelper.isNewChatPage()}getNewChatButton(){return this.currentHelper.getNewChatButton()}renderToolbar(e,t){return this.currentHelper.renderToolbar(e,t)}renderSlashCommandsMenu(e,t){return this.currentHelper.renderSlashCommandsMenu(e,t)}renderPromptApp(e,t){return this.currentHelper.renderPromptApp(e,t)}renderPromptRunner(e,t){return this.currentHelper.renderPromptRunner(e,t)}getSubmitBtn(){return this.currentHelper.getSubmitBtn()}handlePromptAppDisabled(){var e,t;return(t=(e=this.currentHelper).handlePromptAppDisabled)==null?void 0:t.call(e)}handlePromptAppEnabled(){var e,t;return(t=(e=this.currentHelper).handlePromptAppEnabled)==null?void 0:t.call(e)}updateTextInputPlaceholder(e){var t,n;return(n=(t=this.currentHelper).updateTextInputPlaceholder)==null?void 0:n.call(t,e)}getCurrentChatUserEmail(){var e,t;return(t=(e=this.currentHelper).getCurrentChatUserEmail)==null?void 0:t.call(e)}};var u=new E,j=()=>u.getRootElement(),$=()=>u.getTextInputElement(),F=d=>{u.updateTextInputValue(d)},J=()=>u.isNewChatPage();function Y(){return u.getNewChatButton()}function G(){return u.getSubmitBtn()}function K(){return u.handlePromptAppDisabled()}function Q(){return u.handlePromptAppEnabled()}function Z(d){return u.updateTextInputPlaceholder(d)}function ee(){return u.getCurrentChatUserEmail()}export{E as a,j as b,$ as c,F as d,J as e,Y as f,G as g,K as h,Q as i,Z as j,ee as k};
