"use strict";var Utilities=(()=>{let e,n={};return n.deserializeQuery=e=>{let n,t=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=e=>decodeURIComponent(e.replace(t," ")),o={};for(n=r.exec(e);n;)o[i(n[1])]=i(n[2]),n=r.exec(e);return o},n.getFileExtension=e=>{const n=e.split(".");return n.length>1?n[n.length-1].toLowerCase():""},n.navigateToUrlWithNewTab=(e,t,r)=>{BrowserHandler.tabs.create({url:e,active:!!n.isUndefinedOrNull(t)||t},r)},n.safeOpenNewTab=(e,t,r)=>{BrowserHandler.windows.getAll(i=>{0===i.length?BrowserHandler.windows.onCreated.addListener(()=>Utilities.navigateToUrlWithNewTab(e,!!n.isUndefinedOrNull(t)||t,r)):Utilities.navigateToUrlWithNewTab(e,!!n.isUndefinedOrNull(t)||t,r)})},n.isNotUndefinedOrNull=e=>!n.isUndefinedOrNull(e),n.isUndefinedOrNull=e=>null==e,n.isExtensionInTestingMode=()=>n.isNotUndefinedOrNull(window.jasmine),n.isExtensionInDevelopmentMode=()=>{var e,t;if(n.isExtensionInTestingMode())return!1;if(null===(e=window.browser)||void 0===e?void 0:e.extension){const e=BrowserHandler.runtime.getURL("");if(null!=e&&/extension/i.test(e))return!1}else if(null===(t=window.chrome)||void 0===t?void 0:t.extension){const e=n.getManifest();if(null==e)return!1;if(void 0!==e.key||void 0!==e.update_url)return!1}return!0},n.shouldShowEditorMaterial=()=>{var e,t;if(!(null===(e=window.chrome)||void 0===e?void 0:e.extension))return!1;const r=n.getManifest();return-1!=(null===(t=null==r?void 0:r.version_name)||void 0===t?void 0:t.indexOf("[ed]"))},n.getAppDescription=()=>{var e;if(!(null===(e=window.chrome)||void 0===e?void 0:e.extension))return;return n.getManifest().description},n.getManifest=()=>{if("object"!=typeof BrowserHandler.runtime||"function"!=typeof BrowserHandler.runtime.getManifest)return null;const e=BrowserHandler.runtime.getManifest();return null==e?null:e},n.isBackgroundContext=()=>{var e,n;const t=window.location.href;return!(!(null===(e=window.browser)||void 0===e?void 0:e.extension)||!/^ms-browser-extension/.test(t)||window!==BrowserHandler.extension.getBackgroundPage())||!(!(null===(n=window.chrome)||void 0===n?void 0:n.extension)||!/^chrome/.test(t)||window!==BrowserHandler.extension.getBackgroundPage())},n.getCurrentTime=()=>Math.round((new Date).getTime()/1e3),n.isChrome=()=>{const e=window.navigator,t=e.userAgent.indexOf("OPR")>-1;return n.isNotUndefinedOrNull(window.chrome)&&e.vendor.indexOf("Google")>-1&&!1===t&&!n.isEdge()},n.isEdge=()=>window.navigator.userAgent.indexOf("Edg")>-1,n.getBrowserName=()=>n.isChrome()?"Chrome":"Edge",n.isRTL=()=>{const e=BrowserHandler.i18n.getUILanguage();return!!(/^ar/i.test(e)||/^fa/i.test(e)||/^he/i.test(e))},n.setIcon=e=>{const n=chrome.runtime.getManifest();n&&3===n.manifest_version.valueOf()?chrome.action.setIcon({path:e}):BrowserHandler.browserAction.setIcon({path:e})},n.siteIsBlockedByManifest=e=>{var t;if(!(null===(t=window.chrome)||void 0===t?void 0:t.extension))return!1;const r=n.getManifest();if(!(null==r?void 0:r.content_scripts))return!1;if(r.content_scripts.some(n=>{var t;return null===(t=n.matches)||void 0===t?void 0:t.some(n=>new RegExp(n.replace("*",".*")).test(e))}))return!1;const i=r.content_scripts.filter(e=>{var n;return!!(null===(n=e.matches)||void 0===n?void 0:n.find(e=>"<all_urls>"===e))});return 1===i.length&&i[0].exclude_matches.some(n=>new RegExp(n.replace("*",".*")).test(e))},n.getGuid=()=>e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)}),e),n})();