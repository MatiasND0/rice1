"use strict";(self.webpackChunkjump_cutter=self.webpackChunkjump_cutter||[]).push([[633],{6633:(e,t,i)=>{i.d(t,{default:()=>T});var n=i(3839),a=(i(821),i(1949)),l=i(2803),o=i(8221),s=i.n(o);function r(e){(0,n.kZQ)(e,"svelte-1qg884n","canvas.svelte-1qg884n{display:block;background:rgb(calc(0.7 * 255), 255, calc(0.7 * 255))}")}function c(e){let t,i,a,l,o,s,r,c,d,u=e[4].toFixed(3)+"";return{c(){t=(0,n.ND4)("canvas"),i=(0,n.ND4)("label"),a=(0,n.Qq7)("Volume\n    "),l=(0,n.ND4)("meter"),o=(0,n.xem)(),s=(0,n.ND4)("span"),r=(0,n.Qq7)(u),(0,n.CFu)(l,"aria-label","volume"),l.value=e[4],(0,n.CFu)(l,"max",e[3]),(0,n.CFu)(s,"aria-hidden","true"),(0,n.CFu)(t,"width",e[0]),(0,n.CFu)(t,"height",e[1]),(0,n.CFu)(t,"class","svelte-1qg884n")},m(u,m){(0,n.Yry)(u,t,m),(0,n.BCw)(t,i),(0,n.BCw)(i,a),(0,n.BCw)(i,l),(0,n.BCw)(i,o),(0,n.BCw)(i,s),(0,n.BCw)(s,r),e[20](t),c||(d=(0,n.KTR)(t,"click",e[19]),c=!0)},p(e,i){16&i[0]&&(l.value=e[4]),8&i[0]&&(0,n.CFu)(l,"max",e[3]),16&i[0]&&u!==(u=e[4].toFixed(3)+"")&&(0,n.iQh)(r,u),1&i[0]&&(0,n.CFu)(t,"width",e[0]),2&i[0]&&(0,n.CFu)(t,"height",e[1])},i:n.lQ1,o:n.lQ1,d(i){i&&(0,n.YoD)(t),e[20](null),c=!1,d()}}}function d(e){return 1e3*e}function u(...e){return d(function(e,t){return t.unixTime-t.contextTime+e}(...e))}function m(e,t,i){const n=t.lastActualPlaybackRateChange;let a=0;for(let l,o,s=0,r=!1;!r;o=l,s--){switch(s){case 0:l=n;break;case-1:l=i||{time:-1/0,value:1};break;case-2:l={time:-1/0,value:n.value};break;default:throw Error()}r=e>=l.time;const c=o?.time??t.contextTime;a+=(Math.max(l.time,e)-c)*l.value}return t.intrinsicTime+a}function h(...e){return d(m(...e))}function p(e,t){const i=e.data,n=1e3*t,a=i.findIndex((([e])=>e>n));a<0||i.splice(a)}function S(e,t,o){let r,c,S,f,T;let{latestTelemetryRecord:y}=t,{volumeThreshold:g}=t,{loadedPromise:k}=t,{widthPx:P}=t,{heightPx:b}=t,{lengthSeconds:v}=t,{jumpPeriod:x}=t,{timeProgressionSpeed:w}=t,{soundedSpeed:C}=t,{telemetryUpdatePeriod:$}=t;const R="intrinsicTime"===w||"soundedSpeedTime"===w;let A,F,D,M=0,N=0;function I(e=50){const t=1-Math.min(1,(Date.now()-N)/e);return F-(F-M)*t}let E,q,V,j,B,Q,_,K=r;const U=1/6;let W;function G(){W=g/U}const L=s()(G,3e3);G();const Y=i.e(655).then(i.t.bind(i,7655,23));let O;const X=R?h:u;let Z;function z(e,t){V.append(e,0===t?1:0),j.append(e,1===t?1:0)}function H(e){const t=e,i=t.lastActualPlaybackRateChange.name;z(X(t.lastActualPlaybackRateChange.time,t,O),i)}(0,a.Rc)((async function(){const{SmoothieChart:e,TimeSeries:t}=await Y;o(15,E=new e({millisPerPixel:c,interpolation:"step",grid:{fillStyle:"#fff",strokeStyle:"#aaa",verticalSections:0,millisPerLine:1e3,lineWidth:1},labels:{disabled:!0},minValue:0,yRangeFunction(){if(g>0){const e=g/W;return(e>.95||e<.05)&&G(),{min:0,max:W}}return{min:0,max:q.maxValue}}})),E.streamTo(A),E.stop(),k.then((()=>{G();const e=E.options.scaleSmoothing;o(15,E.options.scaleSmoothing=1,E),E.render(),o(15,E.options.scaleSmoothing=e,E)})),q=new t,V=new t,j=new t,B=new t,Q=new t,_=new t;const i="rgba(0, 255, 0, 0.3)",n="rgba(255, 0, 0, 0.3)";E.addTimeSeries(V,{strokeStyle:void 0,fillStyle:i}),E.addTimeSeries(j,{strokeStyle:void 0,fillStyle:n}),E.addTimeSeries(Q,{strokeStyle:void 0,fillStyle:i}),E.addTimeSeries(_,{strokeStyle:void 0,fillStyle:n}),E.addTimeSeries(q,{interpolation:"linear",strokeStyle:void 0,fillStyle:"rgba(100, 100, 220, 0.8)"}),E.addTimeSeries(B,{lineWidth:2,strokeStyle:"#f44"});const a=()=>{(0,l.K)(y),Z=y};ie();const s=A.getContext("2d");let u;function h(e){return R?d(function(e,t,i){const n=$;if(!e.elementPlaybackActive){const t=n*e.lastActualPlaybackRateChange.value;return e.intrinsicTime-t}const a=1e3*n,o=(Date.now()-a)/1e3,s=m(e.contextTime+(o-e.unixTime),e,O);if(t&&t.lastActualPlaybackRateChange.time===e.lastActualPlaybackRateChange.time){(0,l.K)(t);const e=m(t.contextTime+(o-t.unixTime),t,O),i=.25;if(Math.abs(e-s)<i)return e}return i(),s}(e,Z,a))||Number.MIN_SAFE_INTEGER:Date.now()}o(13,D=e=>{if(!y)return;if(void 0===u)return;const t=h(y);u=(t+u)%(S/r*e)*(r/e)-t%S}),function e(){if(y){const t=h(y);let i=t;const n=new Set;function a(e,t,i){const n=e.data,a=n[n.length-1];if(a){const[l,o]=a;l<t&&(n.push([t,o]),i.add(e))}}function l(e){e.data.pop()}a(j,t,n),a(V,t,n);let r=0;S>0&&(void 0===u&&(u=S-t%S),r=S-(t+u)%S,i+=r,o(15,E.lastChartTimestamp=null,E)),B.data[1][0]=i;const c=I(S>0?0:void 0);o(15,E.options.millisPerPixel=c,E);const p=E.lastRenderTimeMillis;E.render(A,i);const f=p!==E.lastRenderTimeMillis;if(n.forEach(l),f){let T;if(R){const x=m(y.contextTime-ee,y,O);T=y.intrinsicTime-x}else T=ee;const g=(d(T)+r)/c,k=Math.floor(g)+.5,v=P-k;s.save(),s.beginPath(),s.lineWidth=1,s.strokeStyle=0===S?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.8)",s.moveTo(v,0),s.lineTo(v,b),s.stroke(),s.restore()}}requestAnimationFrame(e)}()}));let J,ee=0;const te=Number.MAX_SAFE_INTEGER;function ie(){B.clear();const e=R?0:Date.now()-Math.round(1e3*v);B.append(e,g),B.append(te,g)}return e.$$set=e=>{"latestTelemetryRecord"in e&&o(5,y=e.latestTelemetryRecord),"volumeThreshold"in e&&o(6,g=e.volumeThreshold),"loadedPromise"in e&&o(7,k=e.loadedPromise),"widthPx"in e&&o(0,P=e.widthPx),"heightPx"in e&&o(1,b=e.heightPx),"lengthSeconds"in e&&o(8,v=e.lengthSeconds),"jumpPeriod"in e&&o(9,x=e.jumpPeriod),"timeProgressionSpeed"in e&&o(10,w=e.timeProgressionSpeed),"soundedSpeed"in e&&o(11,C=e.soundedSpeed),"telemetryUpdatePeriod"in e&&o(12,$=e.telemetryUpdatePeriod)},e.$$.update=()=>{3072&e.$$.dirty[0]&&o(17,r="soundedSpeedTime"===w?C:1),131329&e.$$.dirty[0]&&o(18,c=r*v*1e3/P),262144&e.$$.dirty[0]&&(F||(F=c),M=I(),F=c,N=Date.now()),262657&e.$$.dirty[0]&&o(16,S=x/100*P*c),221184&e.$$.dirty[0]&&(D?.(K),o(14,K=r)),32&e.$$.dirty[0]&&o(4,f=y?.inputVolume??0),64&e.$$.dirty[0]&&L(),64&e.$$.dirty[0]&&o(3,T=g/U),32&e.$$.dirty[0]&&function(e){if(!E||!e)return;const t=e,i=R?t.intrinsicTime:t.unixTime;var n,a,o,s;if(R&&J&&J.intrinsicTime>t.intrinsicTime&&(function(e,t){for(const{timeSeries:i}of e.seriesSet)p(i,t)}(E,t.intrinsicTime),H(t),ie()),q.append(d(i),t.inputVolume),n=J?.lastActualPlaybackRateChange,a=e.lastActualPlaybackRateChange,!(n?.time===a?.time)&&(H(t),R&&(O=J?.lastActualPlaybackRateChange)),R&&"lastSilenceSkippingSeek"in t){const e=t.lastSilenceSkippingSeek,i=J&&"lastSilenceSkippingSeek"in J?J.lastSilenceSkippingSeek:void 0;if(e&&i?.[0]!==e[0]){const t=1e3*e[0],i=1e3*e[1];z(t,1),z(i,0);const n=i-t,a=20,l=Math.min(n/10,a);q.append(t+l,0),q.append(i-l,0),Z=y}}t.lastScheduledStretchInputTime&&(o=J?.lastScheduledStretchInputTime,s=t.lastScheduledStretchInputTime,!(o?.startTime===s?.startTime))&&function(e){(0,l.K)(e.lastScheduledStretchInputTime,"Attempted to update stretch series, but stretch is not defined");const t=e.lastScheduledStretchInputTime,i=X(t.startTime,e,O),n=X(t.endTime,e,O),a="stretch"==(t.endValue>t.startValue?"stretch":"shrink")?Q:_;a.append(i,1),a.append(n,0),j.append(i,0),V.append(i,0)}(t),ee=t.totalOutputDelay,J=e}(y),32832&e.$$.dirty[0]&&E&&ie()},[P,b,A,T,f,y,g,k,v,x,w,C,$,D,K,E,S,r,c,function(t){n.Tq.call(this,e,t)},function(e){n.Dnk[e?"unshift":"push"]((()=>{A=e,o(2,A)}))}]}class f extends n.r7T{constructor(e){super(),(0,n.TsN)(this,e,S,c,n.LhR,{latestTelemetryRecord:5,volumeThreshold:6,loadedPromise:7,widthPx:0,heightPx:1,lengthSeconds:8,jumpPeriod:9,timeProgressionSpeed:10,soundedSpeed:11,telemetryUpdatePeriod:12},r,[-1,-1])}}const T=f}}]);